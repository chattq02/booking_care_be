// =========================
// BẢNG CƠ SỞ Y TẾ (MEDICAL FACILITY)
// =========================

enum MedicalFacilityStatus {
  Active
  InActive
}

model MedicalFacility {
  id          Int                   @id @default(autoincrement())
  uuid        String                @unique @default(uuid())
  name        String                @unique @db.VarChar(255)
  code        String?               @unique @db.VarChar(100)
  address     String?               @db.VarChar(500)
  phone       String?               @db.VarChar(100)
  email       String?               @db.VarChar(255)
  website     String?               @db.VarChar(255)
  description String?               @db.VarChar(1000)
  province    String?               @db.VarChar(255)
  district    String?               @db.VarChar(255)
  ward        String?               @db.VarChar(255)
  imageUrl    String?
  isActive    MedicalFacilityStatus @default(Active)
  isParent    Boolean               @default(false) // ✅ Thêm trường xác định đây là cơ sở cha
  parentId    Int? // FK: Id cơ sở cha

  // Quan hệ
  parent        MedicalFacility?  @relation("SubFacilities", fields: [parentId], references: [id], onDelete: Cascade)
  subFacilities MedicalFacility[] @relation("SubFacilities")

  departments Department[]
  doctors     User[]       @relation("FacilityDoctors")
  schedules   Schedule[]   @relation("FacilitySchedules")
  userRoles   UserRole[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("medical_facilities")
}
